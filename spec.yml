#MIT License
#Copyright (c) 2017 phR0ze
#
#Permission is hereby granted, free of charge, to any person obtaining a copy
#of this software and associated documentation files (the "Software"), to deal
#in the Software without restriction, including without limitation the rights
#to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
#copies of the Software, and to permit persons to whom the Software is
#furnished to do so, subject to the following conditions:
#
#The above copyright notice and this permission notice shall be included in all
#copies or substantial portions of the Software.
#
#THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
#IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
#FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
#AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
#LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
#OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
#SOFTWARE.

vars:
  arch: x86_64
  release: 0.0.106
  distro: cyberlinux
  timezone: US/Mountain
  country: United_States

  # Vagrant networking
  netname: vboxnet0
  netip: 192.168.56.1
  subnet: 255.255.255.0

build:
  name: build
  type: container
  multilib: true
  docker:
    params: '-e TERM=xterm -v /var/run/docker.sock:/var/run/docker.sock'
    command: 'bash -c "while :; do sleep 5; done"'
  packages:
    - { install: machine-core }
    - { install: machine-tools }
    - { install: dev-tools }
    - { install: shell-tools }
    - { install: initramfs-deps }
    - { install: isolinux-deps }
  changes:
    - { apply: config-base }
    - { apply: remove-docs }
    - { apply: config-root-user }
    - { apply: config-build-user }
    - { apply: config-pacman-keys }
    - { apply: config-docker }
    - { chroot: systemctl enable cronie.service }

layers:

  # Base
  # ----------------------------------------------------------------------------
  - name: base
    type: machine
    multilib: true
    vagrant: { vram: 8 }
    vars: { fontsize: 10 }
    groups: [lp, wheel, network, storage, users]
    boot:
      - entry: "Install <%=distro%>-base        -minimal shell env."
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=base_layers%> showopts vga=792
      - entry: Hardware Detection Tool
        label: hdt
        kernel: hdt.c32
        noboot: true
      - entry: memory test
        label: memtest
        kernel: memtest
        noboot: true
    packages:
      - { install: machine-core }
      - { install: machine-tools }
      - { install: virtualbox-guest }
    changes:
      - { apply: config-base }

  # Shell
  # ----------------------------------------------------------------------------
  - name: shell
    type: machine
    base: base
    vagrant: { vram: 8 }
    groups: [docker]
    boot:
      - entry: "Install <%=distro%>-shell        -base + full shell env."
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=shell_layers%> showopts vga=792
    packages:
      - { install: shell-tools }
    changes:
      - { apply: config-shell }

  # Lite
  # ----------------------------------------------------------------------------
  - name: lite
    type: machine
    base: shell
    vagrant: { vram: 8 }
    vars:
      wallpaper: /usr/share/wallpaper/white-smoke.jpg
    groups:
      - video
      - audio
    boot:
      - entry: "Install <%=distro%>-lite           -shell + minimal X11 env."
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=lite_layers%> showopts vga=792
    packages:
      - { install: xwindows }
      - { install: xwindows-tools }
    changes:
      - { apply: config-lite }

  # Music
  # ----------------------------------------------------------------------------
  - name: music
    type: machine
    base: lite
    boot:
      - entry: "Install <%=distro%>-music       -lite + custom configs"
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=music_layers%> showopts vga=792
    packages:
      - { pkg: idesk,                         desc: Lightweight desktop icons for X }
    changes:
      - { apply: config-idesk }

  # Server
  # ----------------------------------------------------------------------------
  - name: server
    type: machine
    base: lite
    boot:
      - entry: "Install <%=distro%>-server     -lite + LAMP and services"
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=server_layers%> showopts vga=792

  # Heavy
  # ----------------------------------------------------------------------------
  - name: heavy
    type: machine
    base: lite
    boot:
      - entry: "Install <%=distro%>-heavy      -lite + more apps"
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=heavy_layers%> showopts vga=792

  # K8snode
  # ----------------------------------------------------------------------------
  - name: k8snode
    type: machine
    base: shell
    vagrant: { vram: 8, cpus: 2, ram: 2048 }
    boot:
      - entry: "Install <%=distro%>-k8snode  -shell + k8s node env."
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=k8snode_layers%> showopts vga=792
    packages:
      - { install: k8snode-tools }
    changes:
      - { chroot: systemctl enable kubelet.service }

  # Theater
  # ----------------------------------------------------------------------------
  - name: theater
    type: machine
    base: heavy
    vars: { fontsize: 18 }
    boot:
      - entry: "Install <%=distro%>-theater    -heavy + kodi w/configs"
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=theater_layers%> showopts vga=792
    changes:
      - { apply: config-idesk }

  # Desktop
  # ----------------------------------------------------------------------------
  - name: desktop
    type: machine
    base: heavy
    boot:
      - entry: "Install <%=distro%>-desktop   -heavy + libreoffice"
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=desktop_layers%> showopts vga=792

  # Live
  # ----------------------------------------------------------------------------
  - name: live
    type: machine
    base: heavy
    boot:
      - entry: "Start <%=distro%>-live            -live boot env."
        kernel: /<%=distro%>/vmlinuz
        initrd: /<%=distro%>/intel-ucode.img,/<%=distro%>/initramfs.img ipv6.disable=1 layers=<%=live_layers%> showopts vga=792

repos:
  - name: archlinux
    desc: Arch Linux is a lightweight and flexible rolling distribution
  - name: antergos
    desc: Arch Linux based distribution with some pre-built AUR packages
    pgp_key: "http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x6D6DDA3D2A45C7B4"
    mirrors:
      - Server = http://mirrors.tuxns.net/antergos/$repo/$arch
      - Server = http://mirror.us.leaseweb.net/antergos/$repo/$arch
      - Server = http://mirror.umd.edu/antergos/$repo/$arch
      - Server = http://mirrors.acm.wpi.edu/antergos/$repo/$arch
      - Server = http://antergos.x86innovations.com/$repo/$arch
      - Server = http://repo.antergos.info/$repo/$arch
  - name: blackarch
    desc: Arch Linux based penetration testing distribution with over 1400 tools
    pgp_key: "http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x63EC0ADBEA87E4E3"
    mirrors:
      - Server = http://www.mirrorservice.org/sites/blackarch.org/blackarch/$repo/$arch
      - Server = http://distro.ibiblio.org/blackarch/$repo/os/$arch
      - Server = https://deadbeef.ninja/blackarch/$repo/os/$arch
      - Server = http://mirror.team-cymru.org/blackarch/$repo/os/$arch

changes:
  config-base:
    - { apply: config-hosts }
    - { apply: config-fonts }
    - { apply: config-locale }
    - { apply: config-logind }
    - { apply: config-lsb-release }
    - { apply: config-journald }
    - { apply: config-makepkg }
    - { apply: config-mkinitcpio }
    - { apply: config-modprobed }
    - { apply: config-os-release }
    - { apply: config-pacman }
    - { apply: config-proxy }
    - { apply: config-resolved }
    - { apply: config-sshd }
    - { apply: config-sudo-vars }
    - { apply: config-sysctld }
    - { apply: config-syslinux }
    - { apply: config-timesyncd }
    - { apply: config-user-dirs }
    - { apply: config-vconsole }
    - { apply: enable-base-services }
  config-shell:
    - { apply: config-docker }
    - { chroot: systemctl enable cronie.service }
  config-lite:
    - { apply: config-lxdm }
    - { apply: config-mimeapps }
  config-build-user:
    - { chroot: 'useradd -m -G lp,docker,wheel,network,storage,users -s /bin/bash build || true' }
    - { exec: 'find /<%=base_src%>/etc/skel -maxdepth 1 -type f | xargs cp -t /home/build' }
    - { edit: /etc/sudoers, append: true, value: "build ALL=(ALL) NOPASSWD: ALL" }
  config-docker:
    - edit: /usr/bin/setproxy
      append: after
      regex: 'OTHER_PROXY_SETTINGS'
      values:
        - "\n# Configure docker proxy settings"
        - 'proxyfile=/etc/systemd/system/docker.service.d/20-proxy.conf'
        - 'mkdir -p /etc/systemd/system/docker.service.d'
        - 'echo "[Service]" > ${proxyfile}'
        - 'echo "Environment=\"http_proxy=${proxy}\"" >> ${proxyfile}'
        - 'echo "Environment=\"https_proxy=${proxy}\"" >> ${proxyfile}'
        - 'echo "Environment=\"no_proxy=${no_proxy}\"" >> ${proxyfile}'
    - { chroot: systemctl enable docker.service }
  config-hosts:
    - { exec: 'rm -f /etc/hosts' }
    - edit: /etc/hosts
      append: true
      values:
        - '127.0.0.1 localhost'
  config-fonts:
    - edit: /etc/skel/.config/fontconfig/fonts.conf
      append: true
      values:
        - "<?xml version='1.0'?>"
        - "<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>"
        - '<fontconfig>'
        - '  <!-- Set default fonts by alias -->'
        - '  <alias><family>serif</family>'
        - '    <prefer>'
        - '      <family>Source Serif Pro</family>'
        - '      <family>Liberation Serif</family>'
        - '    </prefer>'
        - '  </alias>'
        - '  <alias><family>sans-serif</family>'
        - '    <prefer>'
        - '      <family>Source Sans Pro</family>'
        - '      <family>Liberation Sans</family>'
        - '    </prefer>'
        - '  </alias>'
        - '  <alias><family>monospace</family>'
        - '    <prefer>'
        - '      <family>Inconsolata-g</family>'
        - '      <family>Source Code Pro</family>'
        - '      <family>Liberation Mono</family>'
        - '    </prefer>'
        - '  </alias>'
        - '  <!-- Override Helvetica with Adobe choice -->'
        - '  <match>'
        - '    <test name="family"><string>Helvetica</string></test>'
        - '    <edit binding="same" mode="assign" name="family"><string>Source Sans Pro</string></edit>'
        - '  </match>'
        - '  <!-- Define font family for unrecognnized fonts -->'
        - '  <alias><family>Source Code Pro</family><default><family>monospace</family></default></alias>'
        - '  <alias><family>Droid Sans Mono</family><default><family>monospace</family></default></alias>'
        - '  <!-- By default fontconfig assumes any unrecognized font is sans-serif, so -->'
        - '  <!-- the fonts above have /both/ families. "delete" applies to the first match -->'
        - '  <match>'
        - '    <test compare="eq" name="family"><string>sans-serif</string></test>'
        - '    <test compare="eq" name="family"><string>monospace</string></test>'
        - '    <edit mode="delete" name="family"/>'
        - '  </match>'
        - '  <!-- Hinting and subpixel rendering -->'
        - '  <match target="font">'
        - '    <edit mode="assign" name="rgba"><const>rgb</const></edit>'
        - '    <edit mode="assign" name="hinting"><bool>true</bool></edit>'
        - '    <edit mode="assign" name="hintstyle"><const>hintslight</const></edit>'
        - '    <edit mode="assign" name="lcdfilter"><const>lcddefault</const></edit>'
        - '    <edit mode="assign" name="antialias"><bool>true</bool></edit>'
        - '  </match>'
        - '</fontconfig>'
  config-idesk:
    - edit: /etc/skel/.idesktop/browser.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/64x64/apps/firefox.png'
        - '  X: 330'
        - '  Y: 615'
        - '  Command[0]: firefox'
        - 'end'
    - edit: /etc/skel/.idesktop/pandora.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/72x72/apps/pandora.png'
        - '  X: 330'
        - '  Y: 615'
        - '  Command[0]: firefox'
        - 'end'
    - edit: /etc/skel/.idesktop/audio-player.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/72x72/apps/audacious.png'
        - '  X: 500'
        - '  Y: 616'
        - '  Command[0]: audacious'
        - 'end'
    - edit: /etc/skel/.idesktop/video-player.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/64x64/apps/smplayer.png'
        - '  X: 88'
        - '  Y: 615'
        - '  Command[0]: smplayer'
        - 'end'
    - edit: /etc/skel/.idesktop/shutdown.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/72x72/actions/system-shutdown.png'
        - '  X: 8'
        - '  Y: 615'
        - '  Command[0]: sudo poweroff'
        - 'end'
    - edit: /etc/skel/.idesktop/reboot.lnk
      append: true
      values:
        - 'table Icon'
        - '  Icon: /usr/share/icons/hicolor/72x72/actions/system-reboot.png'
        - '  X: 88'
        - '  Y: 615'
        - '  Command[0]: sudo reboot'
        - 'end'
  config-journald:
    - { edit: /etc/systemd/journald.conf, regex: '^#(SystemMaxUse).*', value: '\1=100M' }
  config-locale:
    - edit: /etc/locale.conf
      append: true
      values:
        - 'LANG=en_US.UTF-8'
        - 'LANGUAGE=en_US.UTF-8'
        - 'LC_ALL=en_US.UTF-8'
    - { edit: /etc/locale.gen, regex: '^#(en_US\..*)', value: '\1' }
    - { chroot: locale-gen }
    - { edit: /etc/profile.d/locale.sh, append: true, value: "export LC_COLLATE=C" }
  config-logind:
    - { edit: /etc/systemd/logind.conf, regex: '^#(HandlePowerKey).*', value: '\1=ignore' }
    - { edit: /etc/systemd/logind.conf, regex: '^#(HandleSuspendKey).*', value: '\1=ignore' }
    - { edit: /etc/systemd/logind.conf, regex: '^#(HandleHibernateKey).*', value: '\1=ignore' }
    - { edit: /etc/systemd/logind.conf, regex: '^#(HandleLidSwitch).*', value: '\1=ignore' }
  config-lsb-release:
    - { exec: 'rm -f /etc/lsb-release' }
    - edit: /etc/lsb-release
      append: true
      values:
        - 'LSB_VERSION=1.4'
        - 'DISTRIB_ID=<%=distro%>'
        - 'DISTRIB_RELEASE=rolling'
        - 'DISTRIB_DESCRIPTION=<%=distro%>'
  config-lxdm:
    - { exec: ln -sf //usr/lib/systemd/system/lxdm.service /etc/systemd/system/display-manager.service }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^#\s*(session)=.*', value: '\1=/usr/bin/openbox-session' }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^#\s*(numlock)=.*', value: '\1=1' }
    #- { edit: /etc/lxdm/lxdm.conf, regex: '^(gtk_theme)=.*', value: '\1=cyberlinux' }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^#\s*(bg)=.*', value: '\1=<%=wallpaper%>' }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^(bottom_pane)=.*', value: '\1=0' }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^(lang)=.*', value: '\1=0' }
    #- { edit: /etc/lxdm/lxdm.conf, regex: '^(theme)=.*', value: '\1=Industrial' }
    - { edit: /etc/lxdm/lxdm.conf, regex: '^(disable)=.*', value: '\1=1' }
  config-makepkg:
    - { edit: /etc/makepkg.conf, regex: '^#(MAKEFLAGS)=.*', value: '\1="-j8"' }
    - { edit: /etc/makepkg.conf, regex: '^(COMPRESSXZ)=.*', value: '\1=(xz -c -z - --threads=0)' }
  config-mimeapps:
    - edit: /etc/skel/.config/mimeapps.list
      append: true
      values:
        - '[Default Applications]'
        - 'application/x-executable=geany.desktop;'
        - 'application/pdf=qpdfview.desktop;'
        - 'text/plain=leafpad.desktop;'
        - 'application/xml=geany.desktop;'
        - 'application/x-shellscript=geany.desktop;'
        - 'image/png=viewnior.desktop;'
        - 'inode/directory=thunar.deskop;'
        - '[Added Associations]'
        - 'application/x-executable=geany.desktop;'
        - 'application/pdf=qpdfview.desktop;'
        - 'text/plain=leafpad.desktop;'
        - 'application/xml=geany.desktop;'
        - 'application/x-shellscript=geany.desktop;'
        - 'image/png=gpicview.desktop;'
        - 'inode/directory=thunar.deskop;'
  config-mkinitcpio:
    - edit: /etc/mkinitcpio.conf
      regex: '^(HOOKS).*'
      value: '\1="base udev autodetect vt-colors modconf block filesystems keyboard"'
  config-modprobed:
    - { edit: /etc/modprobe.d/pcspkr.conf, append: true, value: "blacklist pcspkr" }
  config-pacman-keys:
    - { chroot: "bash -c 'haveged -r 0 && pacman-key --init'" }
    - { chroot: 'pacman-key --populate <%=repos%>' }
    - { chroot: 'pacman -Sy' }
  config-pacman:
    - { exec: 'rm -f /etc/pacman.d/gnupg/dirmngr.conf' }
    - { edit: /etc/pacman.d/gnupg/dirmngr.conf, append: true, value: "honor-http-proxy" }
    - { exec: 'rm -f /etc/pacman-mirrors.conf' }
    - edit: /etc/pacman-mirrors.conf
      append: true
      values:
        - 'Branch=stable'
        - 'Method=rank'
        - 'OnlyCountry=<%=country%>'
        - 'MirrorlistsDir="/etc/pacman.d/mirrors"'
        - 'OutputMirrorlist="/etc/pacman.d/mirrorlist"'
    - { exec: 'rm -f /etc/pacman.d/mirrorlist' }
    - edit: /etc/pacman.d/mirrorlist
      append: true
      values:
        - 'Server = http://archlinux.surlyjake.com/archlinux/$repo/os/$arch'
        - 'Server = http://mirrors.acm.wpi.edu/archlinux/$repo/os/$arch'
        - 'Server = http://mirrors.kernel.org/archlinux/$repo/os/$arch'
        - 'Server = http://mirror.math.princeton.edu/pub/archlinux/$repo/os/$arch'
        - 'Server = http://mirror.us.leaseweb.net/archlinux/$repo/os/$arch'
        - 'Server = https://mirrors.kernel.org/archlinux/$repo/os/$arch'
        - 'Server = http://ftp.snt.utwente.nl/pub/os/linux/archlinux/$repo/os/$arch'
        - 'Server = http://arlm.tyzoid.com/$repo/os/$arch'
        - 'Server = http://mirror.neuf.no/archlinux/$repo/os/$arch'
        - 'Server = http://arch-mirror.wtako.net/$repo/os/$arch'
        - 'Server = http://mirror.datacenter.by/pub/archlinux/$repo/os/$arch'
        - 'Server = http://ftp.myrveln.se/pub/linux/archlinux/$repo/os/$arch'
        - 'Server = http://mirror.nl.leaseweb.net/archlinux/$repo/os/$arch'
        - 'Server = http://mirror.de.leaseweb.net/archlinux/$repo/os/$arch'
        - 'Server = http://mirror.gnomus.de/$repo/os/$arch'
        - 'Server = http://ftp.nluug.nl/os/Linux/distr/archlinux/$repo/os/$arch'
        - 'Server = http://archlinux.mirror.pkern.at/$repo/os/$arch'
        - 'Server = http://mirror.vfn-nrw.de/archlinux/$repo/os/$arch'
        - 'Server = https://mirror.us.leaseweb.net/archlinux/$repo/os/$arch'
        - 'Server = http://archlinux.dynamict.se/$repo/os/$arch'
  config-os-release:
    - { exec: 'rm -f /etc/os-release' }
    - edit: /etc/os-release
      append: true
      values:
        - 'NAME=<%=distro%>'
        - 'ID=<%=distro%>'
        - 'VERSION=<%=release%>'
        - 'PRETTY_NAME=<%=distro%>'
  config-proxy:
    - edit: /usr/bin/setproxy
      append: true
      values:
        - '#!/bin/bash'
        - "\n# Executed by Vagrantfile for vagrant deployments"
        - "# Executed by installer for non-vagrant deployments"
        - 'proxy='
        - 'no_proxy='
        - "\n# Configure system proxies"
        - 'proxyfile=/etc/profile.d/setproxy.sh'
        - 'echo "export ftp_proxy=${proxy}" > $proxyfile'
        - 'echo "export http_proxy=${proxy}" >> $proxyfile'
        - 'echo "export https_proxy=${proxy}" >> $proxyfile'
        - '[ $no_proxy ] && echo "export no_proxy=${no_proxy}" >> $proxyfile'
        - 'chmod +x $proxyfile'
        - "\n# OTHER_PROXY_SETTINGS"
    - { exec: chmod +x /usr/bin/setproxy }
  config-resolved:
    - { exec: ln -sf //run/systemd/resolve/resolv.conf /etc/resolv.conf }
  config-root-user:
    - { exec: "echo 'TERM=xterm' > /etc/environment" }
    - { exec: 'find /<%=base_src%>/etc/skel -maxdepth 1 -type f | xargs cp -t /root' }
  config-sshd:
    - { edit: /etc/ssh/sshd_config, regex: '^#(PermitRootLogin).*', value: '\1 yes' }
    - { edit: /etc/ssh/sshd_config, regex: '^#(UsePrivilegeSeparation).*', value: '\1 sandbox' }
  config-sudo-vars:
    - edit: /etc/sudoers
      append: true
      value: 'Defaults env_keep += "ftp_proxy http_proxy https_proxy no_proxy"'
  config-sysctld:
    - { edit: '/etc/sysctl.d/10-<%=distro%>.conf', append: true, value: "vm.swappiness = 1" }
    - { edit: '/etc/sysctl.d/10-<%=distro%>.conf', append: true, value: "net.ipv4.ip_forward = 1" }
  config-syslinux:
    - { exec: 'rm -f /boot/syslinux/syslinux.cfg' }
    - edit: /boot/syslinux/syslinux.cfg
      append: true
      values:
        - 'PROMPT 0                     # Set to 1 to show menu'
        - 'TIMEOUT 0                    # Time to show menu in 1/10 s so 50=5s'
        - 'DEFAULT <%=distro%>'
        - 'LABEL <%=distro%>'
        - '    MENU LABEL <%=distro%>'
        - '    LINUX ../vmlinuz-linux'
        - '    APPEND root=LABEL=root rw ipv6.disable=1 vga=791'
        - '    INITRD ../initramfs-linux.img'
  config-timesyncd:
    - { exec: 'rm -f /etc/systemd/timesyncd.conf' }
    - edit: /etc/systemd/timesyncd.conf
      append: true
      values:
        - '[Time]'
        - 'NTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org'
        - 'FallbackNTP=0.pool.ntp.org 1.pool.ntp.org 0.fr.pool.ntp.org'
  config-user-dirs:
    - { exec: 'rm -f /etc/xdg/user-dirs.defaults' }
    - edit: /etc/xdg/user-dirs.defaults
      append: true
      values:
        - 'DESKTOP=Desktop'
        - 'DOCUMENTS=Documents'
        - 'DOWNLOAD=Downloads'
        - 'PROJECTS=Projects'
        - 'SCRIPTS=bin'
  config-vconsole:
    - {edit: /etc/vconsole.conf, append: true, value: 'KEYMAP=us' }
  enable-base-services:
    - { chroot: systemctl enable sshd.service }
    - { chroot: systemctl enable systemd-networkd.service }
    - { chroot: systemctl enable systemd-networkd-wait-online.service }
    - { chroot: systemctl enable systemd-resolved.service }
    - { chroot: systemctl enable systemd-timesyncd.service }
  remove-docs:
    - { exec: 'rm -rf /usr/share/{man,doc}' }

packages:
  container-core:
    - { pkg: bash,                          desc: GNU Bourne Again shell }
    - { pkg: gcc-libs,                      desc: GCC runtime libraries, multilib: false, depof: ncurses }
    - { pkg: gcc-libs-multilib,             desc: GCC runtime libraries, multilib: true, depof: ncurses }
    - { pkg: glibc,                         desc: GNU C Library, depof: bash }
    - { pkg: filesystem,                    desc: Base Arch Linux filesystem, depof: glibc }
    - { pkg: linux-api-headers,             desc: Linux API headers, depof: glibc }
    - { pkg: ncurses,                       desc: System V curses emulation library, depof: bash }
    - { pkg: tzdata,                        desc: Time zone data, depof: glibc }

  machine-core:
    - { install: container-core }
    - { pkg: intel-ucode,                   desc: Microcode update files for Intel CPUs }
    - { pkg: linux,                         desc: Linux kernel and supporting modules }
    - { pkg: lsb-release,                   desc: LSB version query program }
    - { pkg: mkinitcpio,                    desc: initramfs image creation utility }
    - { pkg: mkinitcpio-vt-colors,          desc: vt console colors, type: FOREIGN }
    - { pkg: syslinux,                      desc: Boot loaders for ext2/3/4 USB and CD }
    - { pkg: systemd,                       desc: System and service manager }
    - { pkg: systemd-sysvcompat,            desc: Sysinit compat for systemd }

  container-tools:
    - { pkg: coreutils,                     desc: Basic linux utils e.g. cat/chown/chmod/cp/df/echo/ls/mv/ln }
    - { pkg: gzip,                          desc: GNU compression utility, depof: locale-gen build-devel }
    - { pkg: inetutils,                     desc: hostname, ftp, telnet }
    - { pkg: iproute2,                      desc: ifcfg/ip other networking tools }
    - { pkg: net-tools,                     desc: arp/ifconfig/iptunnel/netstat }
    - { pkg: openssl,                       desc: Secure sockets layer and TLS, depof: coreutils }
    - { pkg: perl,                          desc: Perl language, depof: openssl }
    - { pkg: procps-ng,                     desc: pidof/pkill/ps/top/uptime etc..., size: 1MB }
    - { pkg: sed,                           desc: GNU stream editor, depof: locale-gen build-devel, size: 1MB }
    - { pkg: tar,                           desc: File store backup and transport utility, depof: k8s cp }
    - { pkg: vim,                           desc: Improved version of vi text editor, size: 28MB }
    - { pkg: vim-systemd,                   desc: Vim syntax highlighting for systemd }

  machine-tools:
    - { install: container-tools }
    - { pkg: bash-completion,               desc: Bash tab completion }
    - { pkg: e2fsprogs,                     desc: Ext2/3/4 filesystem utilities }
    - { pkg: findutils,                     desc: find/xargs, depof: curl build-devel }
    - { pkg: gcc,                           desc: GNU Compiler Collection, multilib: false, depof: base-devel }
    - { pkg: gcc-multilib,                  desc: GNU Compiler Collection, multilib: true, depof: base-devel }
    - { pkg: grep,                          desc: search text util, depof: build-devel }
    - { pkg: gptfdisk,                      desc: Text-mode paritioning tools e.g. sgdisk }
    - { pkg: haveged,                       desc: Entropy harvesting, depof: pacman-key --init }
    - { pkg: logrotate,                     desc: Rotates system logs automatically }
    - { pkg: openssh,                       desc: Open source SSH implementation }
    - { pkg: pacman,                        desc: Package manager with dependency support, depof: build-devel }
    - { pkg: rsync,                         desc: Remote file transfer sync utility }
    - { pkg: shadow,                        desc: Account mgmt e.g. passwd/useradd/usermod/groupadd }
    - { pkg: sudo,                          desc: Elevate some user commands to root, depof: build-devel }
    - { pkg: util-linux,                    desc: blkid/fdisk/rename/cp etc..., depof: php-gd build-devel }
    - { pkg: which,                         desc: Show the full path of commnds, depof: .bashrc build-devel }
    - { pkg: archlinux-keyring,             desc: Arch Linux GPG keys }
    - { pkg: antergos-keyring,              desc: Antergos GPG keyring, type: ANTERGOS }
    - { pkg: blackarch-keyring,             desc: Blackarch GPG keyring, type: BLACKARCH }

  initramfs-deps:
    - { pkg: gptfdisk,                      desc: Paritioning tools e.g. sgdisk }
    - { pkg: linux,                         desc: Linux kernel }
    - { pkg: mkinitcpio,                    desc: initramfs image creation utility }
    - { pkg: mkinitcpio-vt-colors,          desc: vt console colors, type: FOREIGN }
    - { pkg: rsync,                         desc: Remote file sync utility }
    - { pkg: systemd,                       desc: System and service manager }

  isolinux-deps:
    - { pkg: gfxboot,                       desc: Graphical boot user interface }
    - { pkg: intel-ucode,                   desc: Microcode update files for Intel CPUs }
    - { pkg: memtest86+,                    desc: memtest is used in the ISO creation as menu option }
    - { pkg: syslinux,                      desc: Boot loaders for ext2/3/4 USB and CD }

  shell-tools:
    - { install: dev-tools }
    - { install: reduce-gems }

    - { pkg: cronie,                        desc: Daemon for scheduling programs to run }
    - { pkg: htop,                          desc: Interactive process viewer, alt: top }
    - { pkg: iftop,                         desc: Display bandwidth usage on an interface }
    - { pkg: inxi,                          desc: System info display tool for CPUs/RAM/Kernel etc... }
    - { pkg: linux-docs,                    desc: Linux kernel docs }
    - { pkg: lsof,                          desc: Lists open files for running processes }
    - { pkg: man-db,                        desc: A utility for reading man pages }
    - { pkg: man-pages,                     desc: Linux man pages }
    - { pkg: moreutils,                     desc: Linux utils e.g. parallel-moreutils }
    - { pkg: p7zip,                         desc: Comman-line file archiver for 7zip format, depof: thunar }
    - { pkg: squashfs-tools,                desc: Tooling for squashfs like mksquashfs }
    - { pkg: reptyr,                        desc: Attach running program to a new terminal }
    - { pkg: tmux,                          desc: Terminal multiplexer built off screen }
    - { pkg: usbutils,                      desc: USB device utilities including lsusb }

    # Container support
    - { pkg: docker,                        desc: Run applications as containers, depof: reduce }

    # Packaging
    - { pkg: pkgfile,                       desc: A pacman files and metadata explorer }
    - { pkg: reflector,                     desc: Arch Linux latest pacman mirrors script }

    # Disk utils
    - { pkg: cdrkit,                        desc: CD/DVD burnig/extration and ISO creation }
    - { pkg: inotify-tools,                 desc: Inotify C library for watching files }
    - { pkg: iputils,                       desc: Network utils e.g. ping/tftpd }
    - { pkg: libisoburn,                    desc: Libburn/libisofs/xorriso }
    - { pkg: ntfs-3g,                       desc: NTFS filesystem driver and utilities }
    - { pkg: smartmontools,                 desc: Control/monitor S.M.A.R.T. Drives }
    - { pkg: testdisk,                      desc: Undeletes files from FAT/exFAT/NTFS/ext2 filesystems }
    - { pkg: udisks2,                       desc: Enumerate and operate on storage devices }

    # Compression
    - { pkg: tar,                           desc: File store backup and transport utility }
    - { pkg: unrar,                         desc: The RAR uncompression program }
    - { pkg: unzip,                         desc: Extract and view files in .zip archives }
    - { pkg: zip,                           desc: Zip file compression utilities }

    # Network
    - { pkg: curl,                          desc: Adding curl command to pull in packer scripts }
    - { pkg: dnsutils,                      desc: Network utilities dig/host/nslookup }
    - { pkg: gnu-netcat,                    desc: Network piping application }
    - { pkg: nfs-utils,                     desc: Support programs for Network File Systems }
    - { pkg: nmap,                          desc: Network discovery and security auditing }
    - { pkg: tcpdump,                       desc: Network monitoring and data acquisition }
    - { pkg: wget,                          desc: Retrieve files from the Web }

  systemd:
    - { pkg: systemd,                       desc: System and service manager }
    - { pkg: systemd-sysvcompat,            desc: Sysinit compat for systemd }

  dev-tools:
    - { pkg: arch-install-scripts,          desc: arch-chroot/genfstab/pacstrap }
    - { pkg: autoconf,                      desc: Automatically configure source code, depof: base-devel }
    - { pkg: automake,                      desc: Automatically create Makefiles, depof: base-devel }
    - { pkg: binutils,                      desc: Manipulate binary and object files, depof: base-devel }
    - { pkg: bison,                         desc: General purpose parser generator, depof: base-devel }
    #- { pkg: delve,                         desc: A debugger for the Go Programming Language, type: FOREIGN }
    - { pkg: devtools,                      desc: Misc development tools including makepkg conf, depof: reduce }
    - { pkg: diffutils,                     desc: Patch file utility programs }
    - { pkg: dos2unix,                      desc: Text file format converter }
    - { pkg: fakeroot,                      desc: Tool for simulating supersuer privileges, depof: base-devel }
    - { pkg: file,                          desc: File type identification utility, depof: base-devel }
    - { pkg: flex,                          desc: Generate text-scanning programs, depof: base-devel }
    - { pkg: gawk,                          desc: GNU version of awk, depof: base-devel }
    - { pkg: gettext,                       desc: GNU internationalization library, depof: base-devel }
    - { pkg: git,                           desc: Fast distributed version control system }
    - { pkg: go,                            desc: Compiler and tools for the Go programming lang }
    - { pkg: go-bindata,                    desc: Embed any file as Go code }
    - { pkg: go-tools,                      desc: Developer tools for the Go programming lang }
    - { pkg: glide,                         desc: Package management for the Go programing lang }
    - { pkg: groff,                         desc: GNU trof text-formatting system, depof: base-devel }
    - { pkg: jq,                            desc: Command line JSON processor }
    - { pkg: libtool,                       desc: Generic library support script, depof: base-devel }
    - { pkg: m4,                            desc: GNU macro processor, depof: base-devel }
    - { pkg: make,                          desc: GNU utility to build programs, depof: base-devel }
    - { pkg: patch,                         desc: Utility to apply patches to files, depof: base-devel }
    - { pkg: pkg-config,                    desc: System for managing library flags, depof: base-devel }
    - { pkg: psmisc,                        desc: fuser/killall/pstree }
    - { pkg: python-pip,                    desc: Python package management tool }
    - { pkg: python-yaml,                   desc: YAML support using fast libYAML library }
    - { pkg: ruby,                          desc: Ruby lang quick and easy programming }
    - { pkg: texinfo,                       desc: Documentation for online information, depof: base-devel }
    - { pkg: yaourt,                        desc: Pacman wrapper with AUR, type: ANTERGOS }

  pyside:
    - { pkg: python-pyside,                 desc: LGPL Qt bindings for Python }
    - { pkg: python-pyside-tools,           desc: PySide rcc and uic development tools }

  reduce-gems:
    - { pkg: bundler,                       desc: Gem management, type: GEM }
    - { pkg: colorize,                      desc: Colorized output, type: GEM }
    - { pkg: filesize,                      desc: Filesize to string maipulations, type: GEM }
    - { pkg: mechanize,                     desc: Automate interation with websites, type: GEM, depof: chromium build }
    - { pkg: net-ssh,                       desc: Pure Ruby SSH2 implementation, type: GEM }
    - { pkg: net-scp,                       desc: Pure Ruby SCP implementation, type: GEM }
    - { pkg: nokogiri,                      desc: HTML parser with XPath and CSS3 selectors, type: GEM, depof: chromium build}
    - { pkg: pry,                           desc: Ruby debugger, type: GEM }

  xwindows:
    - { pkg: dconf,                         desc: A low-level configuration system }
    - { pkg: xdg-utils,                     desc: Desktop integration utilities }
    - { pkg: xdg-user-dirs,                 desc: Manage user directories like ~/Desktop }
    - { pkg: xorg,                          desc: X.org X11 xorg-drivers and others }
    - { pkg: xorg-xdpyinfo,                 desc: Xorg display info utility }
    - { pkg: xsel,                          desc: Tool for getting/setting X selection }
    - { pkg: xterm,                         desc: X terminal emulator }
    - { pkg: alsa-utils,                    desc: Alsa utilities including amixer }
    - { pkg: gnome-alsamixer,               desc: Gnome's audio controls not too bad }
    - { pkg: gtk-engines,                   desc: GTK theme engines for cyberlinux theme }
    - { pkg: gtk-engine-murrine,            desc: GTK theme engine for cyberlinux theme }
    - { pkg: lxappearance-obconf,           desc: Openbox support for lxappearance }
    - { pkg: lxdm,                          desc: Lightweight X11 Display Manager }
    - { pkg: lxinput,                       desc: Keyboard and mouse config for LXDE }
    - { pkg: lxrandr,                       desc: Monitor configuration tool for LXDE }
    - { pkg: lxsession,                     desc: Lightweight X11 session manager for LXDE }
    - { pkg: lxterminal,                    desc: Terminal for LXDE, alt: terminator }
    - { pkg: oblogout,                      desc: Openbox logout script }
    - { pkg: openbox,                       desc: Lightweight X11 window manager }
    - { pkg: mesa,                          desc: Open-source OpenGL implementation }
    - { pkg: mesa-demos,                    desc: Mesa demos and tools e.g glxinfo }
    - { pkg: numix-frost-themes,            desc: Numix frost GTK2, GTK3 and OpenBox themes, type: ANTERGOS }
    - { pkg: paper-icon-theme,              desc: cyberlinux icon theme, type: FOREIGN }
    - { pkg: pulseaudio-alsa,               desc: ALSA Configuration for PulseAudio }
    - { pkg: python-xdg,                    desc: Enable use of .desktop files in /etc/xdg }
    - { pkg: xcursor-numix-frost,           desc: Numix frost cursor theme, type: FOREIGN }

  xwindows-tools:
    - { pkg: audacious,                     desc: Audio/Player, alt: deadbeaf, xnoise }
    #- { pkg: chromium,                      desc: Opensource project behind Chrome, type: FOREIGN }
    #- { pkg: chromium-widevine,             desc: Chromium support for Netflix, type: FOREIGN }
    - { pkg: filezilla,                     desc: Network/Transfer }
    - { pkg: gpicview,                      desc: Image viewer, alt: shotwell/viewnior }
    - { pkg: gsimplecal,                    desc: Simple calendar like windows systray calendar }
    - { pkg: gvim,                          desc: Improved version of vi text editor, conflict: vim }
    - { pkg: hardinfo,                      desc: A system information and benchmark tool }
    - { pkg: nitrogen,                      desc: System wallpaper manager }
    - { pkg: pepper-flash,                  desc: Chromium flash support, type: ANTERGOS }
    - { pkg: pnmixer,                       desc: Volume controls in system tray, type: AUR }
    - { pkg: smplayer,                      desc: UI wrapper around mplayer with click to pause, alt: vlc }
    - { pkg: smplayer-skins,                desc: Skins for SMPlayer }
    - { pkg: smplayer-themes,               desc: Themes for SMPlayer }
    - { pkg: thunar,                        desc: Lightweight File Manager from Xfce }
    - { pkg: tint2,                         desc: Lightweight taskmanager and system tray }

    # Media Codecs
    - { pkg: gst-libav,                     desc: GStreamer libav Plugin }
    - { pkg: gst-plugins-bad,               desc: GStreamer Bad Plugins }
    - { pkg: gst-plugins-base,              desc: GStreamer Base Plugins }
    - { pkg: gst-plugins-good,              desc: GStreamer Good Plugins }
    - { pkg: gst-plugins-ugly,              desc: GStreamer Ugly Plugins }
    - { pkg: libdvdcss,                     desc: DVD media codec support }

    # X11 Fonts
    - { pkg: adobe-source-code-pro-fonts,   desc: Mono-spaced coding environments }
    - { pkg: terminus-font,                 desc: Monospace bitmap font for consoles }
    - { pkg: ttf-bitstream-vera,            desc: Bitstream vera fonts }
    - { pkg: ttf-dejavu,                    desc: Bitstream Vera Fonts w/more characters }
    - { pkg: ttf-droid,                     desc: Google Android general purpose fonts }
    - { pkg: ttf-google-fonts-typewolf,     desc: Typewolf's 40 best fonts from the Google Fonts project, type: ANTERGOS }
    - { pkg: ttf-inconsolata-g,             desc: Best monospace terminal font, type: AUR }
    - { pkg: ttf-indic-otf,                 desc: Indic Opentype Fonts collection }
    - { pkg: ttf-liberation,                desc: Red Hats Liberation fonts.  }
    - { pkg: ttf-ms-fonts,                  desc: Microsoft core fonts, type: AUR }

  desktop-tools:
    - { pkg: cinnamon-screensaver,          desc: Screensaver for the Cinnamon desktop, type: FOREIGN }
    - { pkg: gimp,                          desc: Excellent image editor, alt: pinta }
    - { pkg: hunspell-en_US,                desc: US dictionaries for spell checking, deps: libreoffice }
    - { pkg: inkscape,                      desc: Professional vector graphics editor }
    - { pkg: libreoffice-fresh,             desc: LibreOffice branch with new features/enhancements }
    - { pkg: keepass,                       desc: Cross platform password manager }
    - { pkg: kolourpaint,                   desc: Paint application that saves jpg in format for GFXBoot }
    - { pkg: python2-lxml,                  desc: Python wrapper for libxml2, deps: Inkscape }
    - { pkg: openshot,                      desc: Simple powerful Video Editor, alt: pitivi, kdenlive }
    - { pkg: scribus,                       desc: Open Source Desktop Publishing }
    - { pkg: synergy,                       desc: Network/Virtual KVM }

  heavy-tools:
    - { install: teamviewer }
    - { pkg: audacity,                      desc: Audio editor - cross platform, tried and tested }
    - { pkg: conky,                         desc: Lightweight system monitor for X }
    - { pkg: dmenu,                         desc: Super light weight application runner }
    - { pkg: guake,                         desc: Drop-down python based quake style terminal }
    - { pkg: gvfs,                          desc: Support for Trash and USB, depof: thunar-volman }
    - { pkg: plank,                         desc: Elegant, simple, clean dock }
    - { pkg: qopenvpn-pia,                  desc: OpenVPN system tray with PIA integration, type: FOREIGN }
    - { pkg: thunar-archive-plugin,         desc: Thunar integration with file-roller }
    - { pkg: thunar-media-tags-plugin,      desc: Thunar plugin to view media details }
    - { pkg: thunar-volman,                 desc: Thunar plugin to automatically manage removeable devices }
    - { pkg: visual-studio-code,            desc: Editor for modern development, type: AUR }
    - { pkg: xfburn,                        desc: Burning tool, alt: k3b, brasero }
    - { pkg: xfce4-screenshooter,           desc: Plugin that makes screenshots for the Xfce panel }
    - { pkg: xnviewmp-system-libs,          desc: Efficient image viewer/browser/converter, type: AUR }

    # Develop
    - { pkg: awf-git,                       desc: Widget Factory for developing GTK themes, type: AUR }
    - { pkg: meld,                          desc: Develop/Diff Tool - Graphical diff tool cross platform }
    - { pkg: vim-fugitive,                  desc: Git wrapper }
    - { pkg: vim-supertab,                  desc: <Tab> for all completion }
    - { pkg: vim-ultisnips,                 desc: TextMate-style snippets for Vim }

    # OpenGL
    - { pkg: lib32-mesa,                    desc: OpenGL opensource implementation, depof: kodi/steam }
    - { pkg: lib32-mesa-vdpau,              desc: Mesa vdpau drivers, depof: kodi/steam }
    - { pkg: mesa-vdpau,                    desc: Mesa vdpau drivers, depof: kodi/steam }

    # Office
    - { pkg: cups-pdf,                      desc: System/Printer Driver - PDF printer driver }
    - { pkg: leafpad,                       desc: Office/Notepad - Simple notepad knock off }
    - { pkg: qpdfview,                      desc: A tabbed PDF viewer using the poppler library, type: AUR }

    # Utility
    - { pkg: catfish,                       desc: System/File Search - File search tool }
    - { pkg: dconf-editor,                  desc: New configuration manager intended to replace gconf }
    - { pkg: desktop-file-utils,            desc: Command line utilities for working with desktop entries }
    - { pkg: file-roller,                   desc: System/Compression, alt: xarchiver }
    - { pkg: galculator,                    desc: Office/Calculator }
    - { pkg: gconf-editor,                  desc: Old Gnome configuration manager separate dconf-editor db }
    - { pkg: gparted,                       desc: System/Partitioning - Partition magic type tool }
    - { pkg: tumbler,                       desc: D-Bus thumbnail service for apps (e.g. Thunar) }

  handbrake:
    - { pkg: handbrake,                     desc: Video/Encoding - Video encoding tool for mp4/mkv }
    - { pkg: handbrake-cli,                 desc: Video/Encoding - Video encoding tool for mp4/mkv }

  theater-tools:
    - { pkg: idesk,                         desc: Lightweight desktop icons for X }
    - { pkg: kodi,                          desc: Software media player and entertainment hub }
    - { pkg: tiny-media-manager,            desc: Cross platform media manager, type: AUR }

  remote-desktop:
    - { pkg: freerdp,                       desc: RDP client plugin for remmina }
    - { pkg: remmina,                       desc: Network/Remoting - Nice remoting UI for RDP }

  file-sharing:
    - { pkg: qbittorrent,                   desc: Network/Bittorent, alt: deluge }

  teamviewer:
    - { pkg: teamviewer,                    desc: Network/Remoting - Better than VNC garbage, type: FOREIGN }

  freeswitch:
    #- { pkg: freeswitch,                    desc: An opensource telephony system, type: FOREIGN }
    - { pkg: unixodbc,                      desc: Open spec for accessing Data Sources, depof: freeswitch }

  php-apache:
    - { pkg: apache,                        desc: Apache web server, deb: phpBB }
    - { pkg: bzip2,                         desc: Compression util for the bzip2 format, depof: php-gd }
    - { pkg: php,                           desc: PHP lang, depof: phpBB }
    - { pkg: php-apache,                    desc: PHP apache module, depof: phpBB }
    - { pkg: php-sqlite,                    desc: PHP sqlite module, depof: phpBB }
    - { pkg: php-gd,                        desc: PHP gd module, depof: phpBB }
    - { pkg: curl,                          desc: Network download REST command line tool, depof: php }
    - { pkg: cracklib,                      desc: Cryptography suite, depof: shadow }
    - { pkg: e2fsprogs,                     desc: Ext2/3/4 filesystem utilities, depof: shadow }
    - { pkg: findutils,                     desc: Util to find applications, depof: curl }
    - { pkg: shadow,                        desc: Account mgmt passwd/usermod/groupadd, depof: util-linux }
    - { pkg: util-linux,                    desc: Utilities blkid/fdisk/rename/cp etc..., depof: php-gd }
    - { pkg: xz,                            desc: Compression util for xz format, depof: php-gd }

  # Virtualization packages
  #-----------------------------------------------------------------------------
  k8shost-tools:
    - { pkg: bridge-utils,                  desc: Ethernet bridge config utils, depof: k8s }
    - { pkg: ebtables,                      desc: Ethernet bridge filtering utilities, depof: k8s }
    - { pkg: ethtool,                       desc: Network drivers and hardware util, depof: k8s }
    - { pkg: helm,                          desc: Kubernetes package manager, type: FOREIGN }
    - { pkg: kubernetes-kubectl,            desc: K8s cluster controller, type: FOREIGN, aurpath: kubernetes }
    - { pkg: socat,                         desc: Multipurpose relay, depof: k8s}

  k8snode-tools:
    - { pkg: jq,                            desc: Command line JSON processor, depof: kubectl }
    - { pkg: helm,                          desc: Kubernetes package manager, type: FOREIGN }
    - { pkg: kubernetes-kubeadm,            desc: K8s cluster bootstrap, type: FOREIGN, aurpath: kubernetes }
    - { pkg: kubernetes-kubectl,            desc: K8s cluster controller, type: FOREIGN, aurpath: kubernetes }
    - { pkg: kubernetes-kubelet,            desc: K8s node control agent, type: FOREIGN, aurpath: kubernetes }
    - { pkg: kubernetes-cni,                desc: K8s networking plugins, type: FOREIGN, aurpath: kubernetes }

  vagrant-tools:
    - { pkg: packer,                        desc: HashiCorp's vagrant box builder, type: FOREIGN }
    - { pkg: vagrant,                       desc: Build and distribute virtualized dev environments }
    - { pkg: virtualbox,                    desc: Cross platform virtualization with UI }
    - { pkg: virtualbox-guest-iso,          desc: VirtualBox Guest Additions ISO image }
    - { pkg: virtualbox-host-dkms,          desc: VirtualBox host kernel modules }

  virtualbox-guest:
    - { pkg: dkms,                          desc: Dynamic kernel modules system, depof: virtualbox }
    - { pkg: linux-headers,                 desc: Linux kernel headers needed for dkms }
    - { pkg: virtualbox-guest-utils-nox,    desc: VirtualBox guest drivers and utilities, offline: true }
    - { pkg: virtualbox-guest-dkms,         desc: VirtualBox guest kernel modules, offline: true }
